### React diff算法思想

- tree diff：只会对DOM树逐层比较：因为在Web应用程序中将组件树不同级的移动比较是非常罕见的。**React 官方建议不要进行 DOM 节点跨层级的操作**。因为这样做会将这层节点全部删除，然后再全部创建到另一层插入

- component diff：不同类型的节点直接删除，重新创建插入。不浪费时间继续比较他们的相似之处。相同类型的节点，React会对属性进行重设从而实现节点的转换

- element diff：对于列表节点的比较来说，React允许我们为节点提供一个key值，用于告诉React那些DOM节点是可以复用的。
  - 如果不提供key的话，React会逐个对节点进行更新，转换到目标节点
  - 如果提供了key，React能够找到正确的位置去插入或更新新的节点
  - 使用了key的element diff算法，会采取一个顺序优化手段，他会保存一个`lastIndex`变量，这个变量为访问过的节点在老序列中最右的位置，如果新序列中访问到的节点比老序列中访问过的节点的最右位置小，说明这个节点向后移动了，这个时候才会对它进行移动操作。否则不会移动节点

  ​

  > 建议：在开发过程中，尽量减少类似将最后一个节点移动到列表首部的操作，当节点数量过大或更新操作过于频繁时，在一定程度上会影响 React 的渲染性能。（顺序优化的弊端